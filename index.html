<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>볼링 점수 관리 - 모바일 UI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        .sticky-footer { position: sticky; bottom: 0; left: 0; right: 0; }
    </style>
</head>
<body class="bg-gray-100">

<div id="app">
    <div class="max-w-md mx-auto min-h-screen flex flex-col">
        <header class="bg-blue-600 text-white p-4 shadow-md text-center">
            <h1 class="text-xl font-bold">볼링점수관리</h1>
        </header>

        <main class="flex-1 p-4 pb-24">
            <div v-for="(player, index) in players" :key="index" 
                 class="bg-white rounded-xl shadow-sm mb-4 border border-gray-200 overflow-hidden">
                
                <div class="flex justify-between items-center bg-gray-50 px-4 py-2 border-b">
                    <span class="font-bold text-gray-700">{{ player.name }}</span>
                    <div class="flex gap-2">
                        <button @click="player.team = '광'" 
                                :class="player.team === '광' ? 'bg-orange-500 text-white' : 'bg-gray-200 text-gray-600'"
                                class="px-3 py-1 rounded-full text-xs font-bold transition">광</button>
                        <button @click="player.team = '피'" 
                                :class="player.team === '피' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-600'"
                                class="px-3 py-1 rounded-full text-xs font-bold transition">피</button>
                        <button @click="player.team = '띠'" 
                                :class="player.team === '띠' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-600'"
                                class="px-3 py-1 rounded-full text-xs font-bold transition">띠</button>
                    </div>
                </div>

                <div class="p-4 grid grid-cols-3 gap-3">
                    <div class="flex flex-col">
                        <label class="text-[10px] text-gray-400 uppercase mb-1">핸디</label>
                        <input type="number" v-model.number="player.handicap" 
                               class="w-full bg-gray-50 border border-gray-200 rounded-lg p-2 text-center focus:ring-2 focus:ring-blue-400 outline-none" placeholder="0">
                    </div>
                    <div class="flex flex-col">
                        <label class="text-[10px] text-gray-400 uppercase mb-1 font-bold text-blue-500">점수입력</label>
                        <input type="number" v-model.number="player.score" 
                               class="w-full bg-blue-50 border border-blue-100 rounded-lg p-2 text-center focus:ring-2 focus:ring-blue-400 outline-none font-bold text-blue-700" placeholder="120">
                    </div>
                    <div class="flex flex-col">
                        <label class="text-[10px] text-gray-400 uppercase mb-1">올카바</label>
                        <input type="number" v-model.number="player.allCover" 
                               class="w-full bg-gray-50 border border-gray-200 rounded-lg p-2 text-center focus:ring-2 focus:ring-blue-400 outline-none" placeholder="0">
                    </div>
                </div>
            </div>
        </main>

        <footer class="sticky-footer bg-yellow-400 p-4 shadow-[0_-4px_10px_rgba(0,0,0,0.1)] flex justify-around items-center border-t-2 border-yellow-500">
            <div class="text-center">
                <p class="text-xs font-bold text-yellow-800">광팀</p>
                <p class="text-3xl font-black text-gray-900">{{ totals.gwang }}</p>
            </div>
            <div class="w-px h-10 bg-yellow-600 opacity-20"></div>
            <div class="text-center">
                <p class="text-xs font-bold text-yellow-800">피팀</p>
                <p class="text-3xl font-black text-gray-900">{{ totals.pi }}</p>
            </div>
            <div class="w-px h-10 bg-yellow-600 opacity-20"></div>
            <div class="text-center">
                <p class="text-xs font-bold text-yellow-800">띠팀</p>
                <p class="text-3xl font-black text-gray-900">{{ totals.tti }}</p>
            </div>
        </footer>
    </div>
</div>

<script>
    const { createApp, ref, computed } = Vue;

    createApp({
        setup() {
            // 이미지 데이터를 기반으로 한 초기 상태
            const players = ref([
{name:'박성진2', handicap:0, score:120, allCover:0, team:'광'},
{name:'김도현', handicap:0, score:120, allCover:0, team:'피'},
{name:'김민희', handicap:12, score:120, allCover:0, team:'피'},
{name:'도신미', handicap:12, score:120, allCover:10, team:'피'},
{name:'석은자', handicap:12, score:1, allCover:0, team:'광'},
{name:'송승현', handicap:0, score:0, allCover:0, team:'광'},
{name:'이부휘', handicap:0, score:0, allCover:0, team:'피'},
{name:'이정호', handicap:0, score:0, allCover:0, team:'피'},
{name:'이태호', handicap:0, score:120, allCover:0, team:'피'},
{name:'임덕수', handicap:0, score:120, allCover:0, team:'광'},
{name:'임문균', handicap:0, score:0, allCover:0, team:'피'},
{name:'조재원', handicap:0, score:120, allCover:0, team:'띠'},
{name:'주승오', handicap:0, score:0, allCover:0, team:'피'},
{name:'최향희', handicap:20, score:0, allCover:10, team:'피'},
{name:'한경섭', handicap:0, score:0, allCover:0, team:'피'},
{name:'홍문기', handicap:0, score:0, allCover:0, team:'피'}
            ]);

            // 실시간 수식 계산 (NVL 기능 포함)
            const totals = computed(() => {
                let gwangSum = 0;
                let piSum = 0;
                let ttiSum = 0;

                players.value.forEach(p => {
                    // NVL(값, 0) 로직: 빈 값이나 오류 시 0으로 처리
                    const h = p.handicap || 0;
                    const s = p.score || 0;
                    const c = p.allCover || 0;
                    const rowTotal = h + s + c;

                    if (p.team === '광') gwangSum += rowTotal;
                    else if (p.team === '피') piSum += rowTotal;
                    else if ( p.team === '띠') ttiSum += rowTotal;
                });

                return { gwang: gwangSum, pi: piSum , tti: ttiSum};
            });

            return { players, totals };
        }
    }).mount('#app');
</script>

</body>
</html>